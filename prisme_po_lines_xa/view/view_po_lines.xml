<?xml version="1.0" encoding="utf-8"?>
<!-- 
########################################################################### 
# 
# Prisme Solutions Informatique SA 
# Copyright (c) 2020 Prisme Solutions Informatique SA <http://prisme.ch> 
# 
# This program is free software: you can redistribute it and/or modify 
# it under the terms of the GNU Lesser 	General Public License as 
# published by the Free Software Foundation, either version 3 of the 
# License, or (at your option) any later version. 
# This program is distributed in the hope that it will be useful, 
# but WITHOUT ANY WARRANTY; without even the implied warranty of 
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the 
# GNU Lesser General Public License for more details. 
# You should have received a copy of the GNU Lesser General Public Lic 
# along with this program. If not, see <http://www.gnu.org/licenses/>. 
# 
# Project ID: OERP-007-03  - T524
# 
# Modifications: 
# 
########################################################################## -->
<odoo>
	<data>
		<!--Purchase Line -->
		<record id="prisme_purchase_line_view_tree" model="ir.ui.view">
			<field name="name">prisme.purchase.line.view.tree</field>
			<field name="model">purchase.order.line</field>
			<field name="arch" type="xml">
				<tree string="Purchase line">
					<field name="company_id" />
					<field name="order_id" />
					<field name="partner_id" />
					<field name="currency_id" />
					<field name="product_id" />
					<field name="price_unit" />
					<field name="product_qty" />
					<field name="price_subtotal" string="Amount in currency"/>
					<field name="amount_local_currency" widget="monetary" options="{'currency_field':'local_currency'}"/>
					<field name="local_currency" invisible="True"/>
					<field name="name" />
					<field name="state" />
					<field name="product_uom_category_id" invisible="1"/>
				</tree>
			</field>
		</record>
        
        <record id="prisme_purchase_line_view_pivot" model="ir.ui.view">
            <field name="name">prisme.purchase.line.view.pivot</field>
            <field name="model">purchase.order.line</field>
            <field name="arch" type="xml">
				<pivot string="Purchase lines">
					<field name="product_id"/>
					<field name="product_qty"/>
					<field name="qty_invoiced"/>
					<field name="qty_received"/>
					<field name="price_unit"/>
					<field name="amount_local_currency"/>
				</pivot>
            </field>
        </record>

		<record id="prisme_purchase_line_view_form" model="ir.ui.view">
			<field name="name">prisme.purchase.line.view.form</field>
			<field name="model">purchase.order.line</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Purchase lines">				
					<field name="product_uom_category_id" invisible="1"/>				
					<sheet>
						<group>
							<group>
								<field name="product_id" />
								<label for="product_qty" />
								<div>
									<field name="product_qty" class="oe_inline" />
									<field name="product_uom" class="oe_inline"/>
								
								</div>
								<field name="price_unit" />
								<field name="price_subtotal" />
								<field name="price_total" />
							</group>
							<group>
								<field name="taxes_id" widget="many2many_tags"
									domain="[('parent_id','=',False),('type_tax_use','!=','sale')]" />
								<field name="date_planned" widget="date" />
								<field name="account_analytic_id" colspan="2" />
								<field name="order_id" required="1"
									options="{'no_create': True}" />
								<field name="amount_local_currency"/>
							</group>
						</group>
						<notebook>
							<page string="Notes">
								<field name="name" />
							</page>
							<page string="Invoices and Incoming Shipments">
								<field name="invoice_lines" />
								<field name="move_ids" />
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record model="ir.actions.act_window" id="prisme_purchase_line">
			<field name="name">Purchase line</field>
			<field name="res_model">purchase.order.line</field>
			<field name="view_mode">tree,form,pivot</field>
			<field name="view_id" ref="prisme_purchase_line_view_tree" />
		</record>


		<!-- Menu -->
		<menuitem name="Purchase lines"
			id="menu_prisme_purchase_line"
			parent="purchase.menu_procurement_management" sequence="10"
			action="prisme_purchase_line" />

	</data>
</odoo>
