<?xml version="1.0"?>
<openerp>
	<data>
		<record model="ir.ui.view" id="project_project_form_prisme">
			<field name="name">project.project.form.prisme</field>
			<field name="model">project.project</field>
			<field name="type">tree</field>
			<field name="inherit_id" ref="project.edit_project" />
			<field name="arch" type="xml">
				<field name="partner_id" position="after">
					<field name="analytic_account_id" readonly="1" />
				</field>
			</field>
		</record>
		
		<record id="view_account_analytic_line_search_inherit" model="ir.ui.view">
            <field name="name">account.analytic.line.search.to_invoice</field>
            <field name="model">account.analytic.line</field>
            <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_search"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[2]" position="after">
                    <separator/>
                    <filter name="to_invoice" string="To Invoice" context="{'to_invoice': 1}" domain="[('invoice_id','=',False), ('to_invoice','&lt;&gt;',False)]" icon="terp-dolar"/>
                    <filter name="invoiced" string="Invoiced" domain="[('invoice_id','!=',False), ('to_invoice','&lt;&gt;',False)]" icon="terp-dolar"/>
                </xpath>
            </field>
        </record>

        <record id="view_account_analytic_line_tree_inherit" model="ir.ui.view">
            <field name="name">account.analytic.line.tree.to_invoice</field>
            <field name="model">account.analytic.line</field>
            <field name="inherit_id" ref="analytic.view_account_analytic_line_tree"/>
            <field name="arch" type="xml">
                <field name="account_id" position="after">
                    <field name="to_invoice"/>
                </field>
            </field>
        </record>
        
        <record id="view_account_analytic_line_form_inherit" model="ir.ui.view">
            <field name="name">account.analytic.line.form.to_invoice</field>
            <field name="model">account.analytic.line</field>
            <field name="inherit_id" ref="analytic.view_account_analytic_line_form"/>
            <field name="arch" type="xml">
                <field name="amount" position="before">
                    <field name="to_invoice"/>
                    <field name="invoice_id"/>
                </field>
            </field>
          </record>
		

          <record id="action_project_timesheet_bill_task" model="ir.actions.act_window">
              <field name="name">Invoice Tasks</field>
              <field name="res_model">account.analytic.line</field>
              <field name="view_type">form</field>
              <field name="view_mode">tree,form</field>
              <field name="domain">[]</field>
              <field name="context">{"search_default_to_invoice":1}</field>
              <field name="view_id" ref="view_account_analytic_line_tree_inherit"/>
              <field name="search_view_id" ref="view_account_analytic_line_search_inherit"/>
              <field name="help" type="html">
                <p>
                  You will find here timesheets and purchases you did for contracts that can be reinvoiced to the customer.
                  If you want to record new jobs to invoice, you should use the timesheet menu instead.
                </p>
              </field>
          </record>
		
		 <menuitem id="menu_project_billing" name="Invoicing"
                  parent="project.menu_main_pm" sequence="5"
                  groups="project.group_project_manager"/>

          <menuitem id="menu_project_billing_line" name="Invoice Tasks"
            parent="menu_project_billing" action="action_project_timesheet_bill_task"/>
		
	</data>
</openerp>

