<?xml version="1.0" encoding="UTF-8"?>
<!-- 
###########################################################################
#
#    Prisme Solutions Informatique SA
#    Copyright (c) 2020 Prisme Solutions Informatique SA <http://prisme.ch>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Lesser General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Lesser General Public License for more details.
#    You should have received a copy of the GNU Lesser General Public Lic
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
#    Project ID:    OERP-002-08
#    Phabricator:   T499
#
##########################################################################
 -->
<openerp>
	<data>
		<!-- Add the "QR-INVOICE" tab to Accounting > Sales > Customer Invoices -->
		<record model="ir.ui.view" id="invoice_form_add_qr">
			<field name="name">account.invoice.form.qr.ref</field>
			<field name="model">account.invoice</field>
			<field name="inherit_id" ref="account.invoice_form" />
			<field name="type">form</field>
			<field name="arch" type="xml">
				<!-- Add the CSS for the tab content -->
				<xpath expr="." position="inside">
					<link rel="stylesheet" href="/prisme_invoice_swiss_qrbill/static/src/css/invoice_view.css" />
				</xpath>
				<!-- Add the page at the end -->
				<xpath expr="//page[last()]" position="after">
					<!-- Only show the page in customer invoices (not in vendor bill) -->
					<page string="QR-Invoice" attrs="{'invisible':[('type', '!=', 'out_invoice')]}">
						<group>
							<!-- Only show fields that are supplied -->
							<field attrs="{'invisible':[('qrcode_status', '=', False)]}" name="qrcode_status" />
							<field name="qr_reference" />
							<field attrs="{'invisible':[('qrcode_qrbill', '=', False)]}" name="qrcode_qrbill" widget="image" class="qrinv-img" />
						</group>
					</page>
				</xpath>
			</field>
		</record>
	</data>
</openerp>